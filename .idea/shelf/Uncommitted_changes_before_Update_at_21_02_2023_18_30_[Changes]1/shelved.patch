Index: app/src/main/res/layout/activity_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".MainActivity\">\r\n\r\n    <Button\r\n        android:id=\"@+id/button_cam\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Open camera\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.498\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml
--- a/app/src/main/res/layout/activity_main.xml	
+++ b/app/src/main/res/layout/activity_main.xml	
@@ -16,4 +16,7 @@
         app:layout_constraintHorizontal_bias="0.498"
         app:layout_constraintStart_toStartOf="parent"
         app:layout_constraintTop_toTopOf="parent" />
+
+
+
 </androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/org/insbaixcamp/reus/foodinfo/io/ApiAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.insbaixcamp.reus.foodinfo.io;\r\n\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.logging.HttpLoggingInterceptor;\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\npublic class ApiAdapter extends Activity {\r\n    private static ApiService API_SERVICE;\r\n\r\n\r\n\r\n\r\n    public static ApiService getApiService(String data) {\r\n\r\n        /**\r\n         * Localhost IP for AVD emulators: 10.0.2.2\r\n         *\r\n         */\r\n\r\n         String BASE_URL = \"https://world.openfoodfacts.org/api/v0/product/\" + data + \"/\" ;\r\n\r\n        // Creamos un interceptor y le indicamos el log level a usar\r\n\r\n\r\n        final HttpLoggingInterceptor logging = new HttpLoggingInterceptor();\r\n        logging.setLevel(HttpLoggingInterceptor.Level.BODY);\r\n\r\n        // Asociamos el interceptor a las peticiones\r\n        final OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\r\n        httpClient.addInterceptor(logging);\r\n\r\n        if (API_SERVICE == null) {\r\n            Retrofit retrofit = new Retrofit.Builder()\r\n                    .baseUrl(BASE_URL)\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                    .client(httpClient.build()) // <-- set log level\r\n                    .build();\r\n\r\n            API_SERVICE = retrofit.create(ApiService.class);\r\n        }\r\n\r\n        return API_SERVICE;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/org/insbaixcamp/reus/foodinfo/io/ApiAdapter.java b/app/src/main/java/org/insbaixcamp/reus/foodinfo/io/ApiAdapter.java
--- a/app/src/main/java/org/insbaixcamp/reus/foodinfo/io/ApiAdapter.java	
+++ b/app/src/main/java/org/insbaixcamp/reus/foodinfo/io/ApiAdapter.java	
@@ -16,14 +16,14 @@
 
 
 
-    public static ApiService getApiService(String data) {
+    public static ApiService getApiService(String resultado) {
 
         /**
          * Localhost IP for AVD emulators: 10.0.2.2
          *
          */
 
-         String BASE_URL = "https://world.openfoodfacts.org/api/v0/product/" + data + "/" ;
+         String BASE_URL = "https://world.openfoodfacts.org/api/v0/product/" + resultado +  "/" ;
 
         // Creamos un interceptor y le indicamos el log level a usar
 
Index: app/src/main/java/org/insbaixcamp/reus/foodinfo/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.insbaixcamp.reus.foodinfo;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.database.core.view.Change;\r\nimport com.google.zxing.integration.android.IntentIntegrator;\r\nimport com.journeyapps.barcodescanner.BarcodeCallback;\r\nimport com.journeyapps.barcodescanner.CaptureActivity;\r\nimport com.journeyapps.barcodescanner.ScanContract;\r\nimport com.journeyapps.barcodescanner.ScanOptions;\r\n\r\nimport org.insbaixcamp.reus.foodinfo.io.ApiAdapter;\r\nimport org.insbaixcamp.reus.foodinfo.model.Code;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\n\r\npublic class MainActivity extends AppCompatActivity implements Callback<Code> {\r\n    Button camera;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        camera = findViewById(R.id.button_cam);\r\n        camera.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                scanCode();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void scanCode() {\r\n        ScanOptions options = new ScanOptions();\r\n        options.setDesiredBarcodeFormats(ScanOptions.EAN_13);\r\n        options.setPrompt(\"Volume up to flash on\");\r\n        options.setBeepEnabled(true);\r\n        options.setOrientationLocked(true);\r\n        options.setCaptureActivity(ActivityCap.class);\r\n\r\n\r\n        barLauncher.launch(options);\r\n\r\n    }\r\n\r\n    ActivityResultLauncher<ScanOptions> barLauncher = registerForActivityResult(new ScanContract(),\r\n            result -> {\r\n                if(result.getContents() == null) {\r\n                    Toast.makeText(this, \"Cancelled\", Toast.LENGTH_LONG).show();\r\n                } else {\r\n                    Toast.makeText(this, \"Scanned: \" + result.getContents(), Toast.LENGTH_LONG).show();\r\n\r\n\r\n\r\n\r\n                }\r\n\r\n                Call<Code> call = ApiAdapter.getApiService(result.getContents()).getCode();\r\n                call.enqueue(this);\r\n\r\n\r\n            });\r\n\r\n    public void call(){\r\n\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public void onResponse(Call<Code> call, Response<Code> response) {\r\n        if(response.isSuccessful()){\r\n            Code code = response.body();\r\n            Log.d(\"On response\",\"Code: \" + code.getCode());\r\n        }else{\r\n\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onFailure(Call<Code> call, Throwable t) {\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/org/insbaixcamp/reus/foodinfo/MainActivity.java b/app/src/main/java/org/insbaixcamp/reus/foodinfo/MainActivity.java
--- a/app/src/main/java/org/insbaixcamp/reus/foodinfo/MainActivity.java	
+++ b/app/src/main/java/org/insbaixcamp/reus/foodinfo/MainActivity.java	
@@ -1,55 +1,53 @@
 package org.insbaixcamp.reus.foodinfo;
 
 import androidx.activity.result.ActivityResultLauncher;
-import androidx.annotation.NonNull;
-import androidx.appcompat.app.AlertDialog;
 import androidx.appcompat.app.AppCompatActivity;
 
-import android.content.DialogInterface;
-import android.content.Intent;
 import android.os.Bundle;
 import android.util.Log;
-import android.view.View;
+
 import android.widget.Button;
 import android.widget.Toast;
 
-import com.google.firebase.database.core.view.Change;
-import com.google.zxing.integration.android.IntentIntegrator;
-import com.journeyapps.barcodescanner.BarcodeCallback;
-import com.journeyapps.barcodescanner.CaptureActivity;
 import com.journeyapps.barcodescanner.ScanContract;
 import com.journeyapps.barcodescanner.ScanOptions;
 
 import org.insbaixcamp.reus.foodinfo.io.ApiAdapter;
 import org.insbaixcamp.reus.foodinfo.model.Code;
 
-import java.io.IOException;
-import java.util.ArrayList;
-import java.util.List;
-
 import retrofit2.Call;
 import retrofit2.Callback;
 import retrofit2.Response;
 
 public class MainActivity extends AppCompatActivity implements Callback<Code> {
-    Button camera;
+
+    Button camara;
+
+    String resultado;
+
+    private final ActivityResultLauncher<ScanOptions> barLauncher = registerForActivityResult(new ScanContract(), result -> {
+        if (result.getContents() == null){
+            Toast.makeText(this, "Cancelled", Toast.LENGTH_LONG).show();
+        } else {
+            resultado = result.getContents();
+            Toast.makeText(this, "Scanned: " + result.getContents(), Toast.LENGTH_LONG).show();
+        }
+    });
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
 
-        camera = findViewById(R.id.button_cam);
-        camera.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View view) {
-                scanCode();
-            }
-        });
+        camara.findViewById(R.id.button_cam);
 
+        camara.setOnClickListener(v -> scanCode());
+
+        call(resultado);
     }
 
     private void scanCode() {
+
         ScanOptions options = new ScanOptions();
         options.setDesiredBarcodeFormats(ScanOptions.EAN_13);
         options.setPrompt("Volume up to flash on");
@@ -62,37 +60,18 @@
 
     }
 
-    ActivityResultLauncher<ScanOptions> barLauncher = registerForActivityResult(new ScanContract(),
-            result -> {
-                if(result.getContents() == null) {
-                    Toast.makeText(this, "Cancelled", Toast.LENGTH_LONG).show();
-                } else {
-                    Toast.makeText(this, "Scanned: " + result.getContents(), Toast.LENGTH_LONG).show();
-
-
-
 
-                }
-
-                Call<Code> call = ApiAdapter.getApiService(result.getContents()).getCode();
-                call.enqueue(this);
-
-
-            });
-
-    public void call(){
-
+    public void call(String result) {
+        Call<Code> call = ApiAdapter.getApiService(resultado).getCode();
+        call.enqueue(this);
     }
-
 
 
     @Override
     public void onResponse(Call<Code> call, Response<Code> response) {
-        if(response.isSuccessful()){
+        if (response.isSuccessful()) {
             Code code = response.body();
-            Log.d("On response","Code: " + code.getCode());
-        }else{
-
+            Log.d("On response", "Code: " + code.getCode());
         }
     }
 
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\r\n    id 'com.android.application'\r\n    id 'com.google.gms.google-services'\r\n}\r\n\r\nandroid {\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        applicationId \"org.insbaixcamp.reus.foodinfo\"\r\n        minSdk 23\r\n        targetSdk 32\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\ndependencies {\r\n\r\n    implementation 'com.squareup.okhttp3:logging-interceptor:4.9.3'\r\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\r\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\r\n    implementation 'com.google.code.gson:gson:2.8.6'\r\n    implementation 'com.journeyapps:zxing-android-embedded:4.3.0'\r\n    implementation 'androidx.appcompat:appcompat:1.5.1'\r\n    implementation 'com.google.android.material:material:1.7.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\r\n    implementation 'com.google.firebase:firebase-database:20.1.0'\r\n    testImplementation 'junit:junit:4.13.2'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.4'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.0'\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle b/app/build.gradle
--- a/app/build.gradle	
+++ b/app/build.gradle	
@@ -22,6 +22,7 @@
             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
         }
     }
+
     compileOptions {
         sourceCompatibility JavaVersion.VERSION_1_8
         targetCompatibility JavaVersion.VERSION_1_8
@@ -34,15 +35,15 @@
 dependencies {
 
     implementation 'com.squareup.okhttp3:logging-interceptor:4.9.3'
+    implementation 'com.google.zxing:core:3.4.1'
     implementation 'com.squareup.retrofit2:retrofit:2.9.0'
     implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
     implementation 'com.google.code.gson:gson:2.8.6'
     implementation 'com.journeyapps:zxing-android-embedded:4.3.0'
-    implementation 'androidx.appcompat:appcompat:1.5.1'
-    implementation 'com.google.android.material:material:1.7.0'
+    implementation 'com.google.android.material:material:1.8.0'
     implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
     implementation 'com.google.firebase:firebase-database:20.1.0'
     testImplementation 'junit:junit:4.13.2'
-    androidTestImplementation 'androidx.test.ext:junit:1.1.4'
-    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.0'
+    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
+    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
 }
\ No newline at end of file
